@startuml Система учета энергопотребления - Контекстная диаграмма
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title Система учета энергопотребления - Контекст (C1)

' Пользователи (Person)
Person(homeowner, "Домовладелец", "Мониторит потребление своего дома, получает рекомендации по экономии")
Person(industrial_admin, "Администратор промобъекта", "Анализирует потребление производства, планирует мощности, оптимизирует затраты")
Person(power_company, "Электрокомпания", "Получает агрегированные данные для планирования, анализа спроса, тарификации")
Person(tech_staff, "Технический персонал", "Управляет счетчиками, датчиками, обслуживает оборудование мониторинга")
Person(sysadmin, "Системный администратор", "Администрирует систему, безопасность, резервные копии")

' Основная система
System(energy_system, "Система учета энергопотребления", "Мониторит потребление электроэнергии, выполняет анализ, дает рекомендации, прогнозирует нагрузки, управляет устройствами")

' Внешние системы
System_Ext(smart_meters, "Умные счетчики и датчики", "IoT устройства для сбора данных потребления в реальном времени")
System_Ext(power_utility_system, "Система электрокомпании", "Управление тарифами, планирование мощностей, отправка тарифной информации")
System_Ext(email_sms_provider, "Провайдер Email/SMS/Push", "Отправка уведомлений, напоминаний, оповещений пользователям")
System_Ext(mes_system, "Система управления производством (MES)", "Интеграция данных о процессах производства для расчета энергоемкости")
System_Ext(backup_system, "Система резервного копирования", "Облачное хранилище для резервных копий критичных данных")

' Связи пользователей и системы
Rel(homeowner, energy_system, "Просматривает потребление, историю, рекомендации, устанавливает лимиты", "HTTPS")
Rel(industrial_admin, energy_system, "Анализирует потребление по подразделениям, планирует бюджет, получает отчеты", "HTTPS")
Rel(power_company, energy_system, "Запрашивает агрегированные данные, прогнозы, тренды по регионам", "HTTPS / API")
Rel(tech_staff, energy_system, "Управляет реестром устройств, регистрирует обслуживание, просматривает инциденты", "HTTPS")
Rel(sysadmin, energy_system, "Настраивает систему, управляет доступом, мониторит здоровье", "HTTPS")

' Связи системы и внешних систем
Rel(energy_system, smart_meters, "Получает данные потребления: мощность, энергия", "MQTT / REST API")
Rel(energy_system, power_utility_system, "Отправляет агрегированные данные, получает тарифы и ограничения", "API / HTTPS")
Rel(energy_system, email_sms_provider, "Отправляет события для уведомлений пользователей", "API / HTTPS")
Rel(energy_system, mes_system, "Получает данные о производственных процессах для калькуляции энергоемкости", "API / HTTPS")
Rel(energy_system, backup_system, "Отправляет резервные копии, восстанавливает данные при сбое", "API / HTTPS")

@enduml
