**Дата:** 14 декабря 2025 г.

**Статус:** Принято

**Контекст:**

Система учёта энергопотребления требует:
- Хранения основных данных
- Высокопроизводительной обработки временных рядов
- ACID-транзакций
- Масштабируемости
- Интеграции с аналитическими инструментами
- Работы в российских дата-центрах

**Рассмотренные варианты:**

1. **PostgreSQL** – надёжная реляционная СУБД
2. **TimescaleDB** – расширение PostgreSQL для временных рядов
3. **ClickHouse** – колоночная СУБД для аналитики
4. **MySQL / MariaDB** – популярные СУБД
5. **Yandex Database** – распределённая СУБД

**Решение:**

Выбрана **двухуровневая архитектура базы данных:**
- **PostgreSQL** для основного хранилища
- **TimescaleDB** для временных рядов потребления
- **ClickHouse** для аналитики и отчётов

**Обоснование:**

- **PostgreSQL как основа:** поддержка ACID, репликация, открытая лицензия
- **TimescaleDB для временных рядов:** оптимизация, сжатие данных, совместимость
- **ClickHouse для аналитики:** высокая скорость агрегаций, колоночное хранение

**Недостатки решения:**

- **Оперативная память:** требует много RAM
- **Кривая обучения:** требуется понимание временных рядов
- **Дополнительная сложность:** две системы БД

**Последствия:**

- Настройка репликации и высокой доступности
- Стратегия резервного копирования
- Мониторинг размера БД и производительности запросов
- Тщательная индексация
- Реализация шардинга при необходимости
- Надёжный ETL для ClickHouse